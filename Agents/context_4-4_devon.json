{
  "task": {
    "id": "4-4",
    "title": "Split-Brain Routing Logic",
    "description": "Implement the Router to classify tasks as Strategic or Tactical based on complexity.",
    "role": "developer",
    "phase": "green"
  },
  "instructions": [
    "You are Devon, the Junior Developer Agent.",
    "Your goal is to implement the Task Router logic and API.",
    "Worktree: C:/Coding/CM-devon",
    "Branch: subtask/4-4-split-brain-routing",
    "Required Steps:",
    "1. Checkout the branch `subtask/4-4-split-brain-routing` (Fetch/Pull from Tara or create from Master).",
    "2. Run Tests: `npx jest src/__tests__/services/ai/Router.spec.js` (Confirm they FAIL).",
    "3. Create Router: `backend/src/services/ai/Router.js`.",
    "   - Class `TaskRouter` with method `classify(prompt)`.",
    "   - Rules:",
    "     - STRATEGIC if prompt contains: 'architect', 'design', 'plan', 'database', 'schema', 'security', 'auth'.",
    "     - TACTICAL if prompt contains: 'fix', 'typo', 'style', 'css', 'test', 'refactor', 'docs'.",
    "     - Default: TACTICAL.",
    "4. Create API: `backend/src/routes/ai.js` (or update existing).",
    "   - POST `/api/ai/route` -> Body: { prompt } -> Returns: { mode: 'strategic'|'tactical', reason: '...' }.",
    "5. Create Demo: `backend/demo/demo_4-4.js`.",
    "   - Array of sample prompts.",
    "   - Loop through and print classification results.",
    "6. Run Tests: `npx jest src/__tests__/services/ai/Router.spec.js` (Should PASS).",
    "7. Commit: `feat: implement split-brain routing logic`."
  ],
  "relevant_files": [
    "backend/src/services/ai/Router.js",
    "backend/src/routes/ai.js"
  ]
}

