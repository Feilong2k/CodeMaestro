{
  "task": "4-7",
  "role": "implementer",
  "goal": "Implement MemoryService (Green Phase).",
  "requirements": [
    "Implement `MemoryService` class in `backend/src/services/memoryService.js`.",
    "Method `saveContext(key, data, type, projectId, userId)`: Upsert to DB.",
    "Method `getContext(key, type, projectId, userId)`: Retrieve from DB.",
    "Method `searchContext(query, type, projectId, userId)`: Semantic search (mocked if pgvector not available, or simple LIKE).",
    "Method `savePreference(userId, key, value)`: Helper for user prefs.",
    "Method `getPreferences(userId)`: Helper for user prefs.",
    "Ensure `pool` is used from `../db/connection`."
  ],
  "files": [
    "backend/src/services/memoryService.js"
  ],
  "context": "The MemoryService allows agents to store and retrieve persistent context (User Prefs, Project Context). It replaces the ephemeral session memory."
}

