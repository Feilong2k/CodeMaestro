{
  "task": {
    "id": "4-3",
    "title": "Split-Brain Foundation (Model Adapter)",
    "description": "Implement the backend AI infrastructure for Strategic vs Tactical routing.",
    "role": "developer",
    "phase": "green"
  },
  "instructions": [
    "You are Devon, the Junior Developer Agent.",
    "Your goal is to implement the AI Adapters and Service to pass Tara's tests.",
    "Worktree: C:/Coding/CM-devon",
    "Branch: subtask/4-3-split-brain-foundation (Fetch from Tara/Origin)",
    "Required Steps:",
    "1. Checkout the branch `subtask/4-3-split-brain-foundation`.",
    "2. Run Tests: `npx jest src/__tests__/services/aiService.spec.js` (Confirm they FAIL).",
    "3. Create Config: `backend/src/config/ai.js`.",
    "   - Export keys from `process.env` (GEMINI_KEY, DEEPSEEK_KEY).",
    "   - Define model names.",
    "4. Create Adapters:",
    "   - `backend/src/services/ai/StrategicAdapter.js` (Implements `generate(prompt)` for Gemini).",
    "   - `backend/src/services/ai/TacticalAdapter.js` (Implements `generate(prompt)` for DeepSeek).",
    "   - Mock the API calls for now (return dummy strings) unless we have real keys.",
    "5. Create Service: `backend/src/services/AiService.js`.",
    "   - `send({ mode, prompt })` method.",
    "   - Logic: If mode='strategic', use StrategicAdapter. Else Tactical.",
    "6. Create Demo: `backend/demo/demo_4-3.js`.",
    "   - Import AiService.",
    "   - Call it with both modes and log output.",
    "7. Run Tests: `npx jest src/__tests__/services/aiService.spec.js` (Should PASS).",
    "8. Commit: `feat: implement split-brain foundation`."
  ],
  "relevant_files": [
    "backend/src/config/ai.js",
    "backend/src/services/AiService.js",
    "backend/src/__tests__/services/aiService.spec.js"
  ]
}

