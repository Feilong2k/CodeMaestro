# Phase 4 Subtasks Manifest
# Statuses: pending, in_progress, completed, failed, cancelled

subtasks:
  - id: "4-1"
    title: "Split-Brain Foundation (Strategic/Tactical)"
    status: completed
    owner: "Devon"
    priority: critical
    dependencies: []
    
  - id: "4-2"
    title: "Pattern Library Frontend"
    status: completed
    owner: "Devon"
    priority: high
    dependencies: ["4-1"]

  - id: "4-3"
    title: "Split-Brain Routing Logic"
    status: completed
    owner: "Devon"
    priority: critical
    dependencies: ["4-1"]

  - id: "4-4"
    title: "Escalation & Handoff Protocols"
    status: completed
    owner: "Tara"
    priority: critical
    dependencies: ["4-3"]

  - id: "4-5"
    title: "Dynamic Workflows (Data & Migration)"
    status: completed
    owner: "Devon"
    priority: critical
    dependencies: ["4-4"]

  - id: "4-6"
    title: "Dynamic Workflows (Execution Engine)"
    status: completed
    owner: "Devon"
    priority: critical
    dependencies: ["4-5"]
  
  - id: "4-9"
    title: "Orchestrator Automation (Concern-Based Locking)"
    status: completed
    owner: "Orion"
    priority: critical
    dependencies: ["4-6"]

  - id: "4-7"
    title: "Persistent Memory (Reflexes)"
    status: completed
    owner: "Tara"
    priority: high
    dependencies: ["4-9"]

  - id: "4-10"
    title: "Workflow API & Viewer UI"
    status: completed
    owner: "Devon"
    priority: medium
    dependencies: ["4-5"]

  - id: "4-11"
    title: "Context Pruning Logic"
    status: completed
    owner: "Devon"
    priority: medium
    dependencies: ["4-2"]

  - id: "4-12"
    title: "Constraint Enforcement Logic"
    status: completed
    owner: "Devon"
    priority: high
    dependencies: ["4-9"]

  - id: "4-13"
    title: "Workflow Visualization (Mermaid)"
    status: deferred
    owner: "Devon"
    priority: medium
    dependencies: ["4-10"]

  # Phase 5: Autonomous Execution
  - id: "5-1"
    title: "Tool Registry Core (File & Git)"
    status: completed
    owner: "Devon"
    priority: critical
    dependencies: ["4-11"]

  - id: "5-6"
    title: "Advanced Shell Tool (Safe Exec)"
    status: completed
    owner: "Devon"
    priority: high
    dependencies: ["5-1"]

  - id: "5-7"
    title: "RBAC & Orion Override System"
    status: completed
    owner: "Devon"
    priority: high
    dependencies: ["5-1"]

  - id: "5-2"
    title: "Task Queue System (Postgres)"
    status: completed
    owner: "Devon"
    priority: critical
    dependencies: ["5-1"]

  - id: "5-3"
    title: "The Agent Loop (Executor)"
    status: completed
    owner: "Devon2"
    priority: critical
    dependencies: ["5-2"]

  - id: "5-4"
    title: "Output Parsers (XML)"
    status: completed
    owner: "Devon2"
    priority: high
    dependencies: ["5-3"]

  - id: "5-5"
    title: "Project Management Tools (CRUD)"
    status: completed
    owner: "Devon"
    priority: medium
    dependencies: ["5-1"]

  - id: "5-9"
    title: "Feature Backlog Migration (MD -> DB) & UI"
    status: completed
    owner: "Devon"
    priority: medium
    dependencies: ["5-1"]

  - id: "5-8"
    title: "Task Dashboard UI"
    status: completed
    owner: "Devon1"
    priority: medium
    dependencies: ["5-2"]

  # Phase 5.5: Stabilization & Context API
  - id: "5-10"
    title: "Stabilization (TacticalAdapter & Pathing)"
    status: completed
    owner: "Devon"
    priority: critical
    dependencies: ["5-3"]

  - id: "5-11"
    title: "Project Context API"
    status: completed
    owner: "Devon"
    priority: high
    dependencies: ["5-10"]

  - id: "5-12"
    title: "Tooling Upgrade (JSON & Windows)"
    status: in_progress
    owner: "Devon"
    priority: critical
    dependencies: ["5-11"]

  # Phase 6: Two‑Tiered Brain with OTA/CDP Integration (Milestone 1)
  - id: "6-12"
    title: "Function Calling API Support"
    status: completed
    owner: "Cursor"
    priority: critical
    dependencies: ["5-4"]

  - id: "6-0"
    title: "UI & WebSocket Foundation (3-Panel Layout)"
    status: completed
    owner: "Devon"
    priority: critical
    dependencies: ["5-6"]

  - id: "6-10"
    title: "SystemLogPanel WebSocket Wiring & Basic Events"
    status: in_progress
    owner: "Devon"
    priority: high
    dependencies: ["6-0"]

  - id: "6-1"
    title: "Agent FSM Core + DB Logging"
    status: completed
    owner: "Devon"
    priority: critical
    dependencies: ["5-3", "6-0", "6-10"]

  # New Milestone 1 subtasks (UI‑first, monitorable)
  - id: "6-099"
    title: "UI Panel Reorganization & Basic Chat Cleanup (50/50 Split + Text Wrapping, Compact View)"
    status: pending
    owner: "Devon"
    priority: high
    dependencies: ["6-0", "6-10"]

  - id: "6-110"
    title: "Advanced Chat Modernization – Pause/Resume, Thinking Line, Reverse‑Chronological Chat"
    status: pending
    owner: "Devon"
    priority: high
    dependencies: ["6-099", "6-100"]

  - id: "6-100"
    title: "UnifiedAdapter with JSON Reasoning & Live UI Stream"
    status: pending
    owner: "Devon"
    priority: critical
    dependencies: ["6-12"]

  - id: "6-101"
    title: "Observation Stage with UI‑Displayed Classification"
    status: pending
    owner: "Devon"
    priority: critical
    dependencies: ["6-100"]

  - id: "6-102"
    title: "Thinking Protocols with CDP Level 0 Audit Trail & Verification"
    status: pending
    owner: "Devon"
    priority: critical
    dependencies: ["6-101"]

  - id: "6-103"
    title: "First‑Brain Prompt & Tool Guide (Editable via UI)"
    status: pending
    owner: "Devon"
    priority: high
    dependencies: ["6-100"]

  - id: "6-104"
    title: "Dynamic Context Sliding Window with Read‑Log"
    status: pending
    owner: "Devon"
    priority: medium
    dependencies: ["6-100"]

  - id: "6-105"
    title: "Manifest‑Driven Consultation & Advisory Report UI"
    status: pending
    owner: "Devon"
    priority: high
    dependencies: ["6-102"]

  - id: "6-106"
    title: "Updated OrionAgent.chat with Protocol‑Selection Dashboard"
    status: pending
    owner: "Devon"
    priority: critical
    dependencies: ["6-101", "6-102"]

  - id: "6-108"
    title: "Agent‑Specific OTA Loops (Devon & Tara)"
    status: pending
    owner: "Devon"
    priority: medium
    dependencies: ["6-101"]

  - id: "6-109"
    title: "Investigate TaskQueueService & design dispatch_subtask tool"
    status: pending
    owner: "Devon"
    priority: critical
    dependencies: ["6-101", "6-102"]

# --- Notes (2025-12-10) ---
# Updated by Adam (Architect) for Phase 6 Milestone 1 (Beyond5 Roadmap v2.0):
# - Marked 6‑1 as completed (implementation done per log).
# - Removed incomplete Phase 6 tasks (6‑2 through 6‑9, 6‑11, 6‑13, 6‑14, 6‑15).
# - Added new UI‑first subtasks 6‑099 through 6‑106 with explicit human‑verification checklists.
# - Dependencies follow the OTA/CDP integration flow:
#   6‑099 (UI reorg) → 6‑100 (UnifiedAdapter) → 6‑101 (Observation) → 6‑102 (Thinking)
#   → 6‑105 (Manifest) & 6‑106 (OrionAgent update).
#   Parallel: 6‑103 (Prompt editing) and 6‑104 (Context window).
# - All new logs will include internal‑logic descriptions and expected outputs.
