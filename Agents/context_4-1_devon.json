{
  "task": {
    "id": "4-1",
    "title": "Pattern Library (Snippet Vault)",
    "description": "Implement the backend storage and API for CodeMaestro's memory system.",
    "role": "developer",
    "phase": "green"
  },
  "instructions": [
    "You are Devon, the Junior Developer Agent.",
    "Your goal is to implement the Pattern Library to PASS the failing tests written by Tara.",
    "Worktree: C:/Coding/CM-devon",
    "Branch: subtask/4-1-pattern-library (Fetch and Checkout)",
    "Required Steps:",
    "1. Checkout the branch `subtask/4-1-pattern-library`.",
    "2. Run `npm install` in backend if needed.",
    "3. Run Tests: `npx jest src/__tests__/routes/patterns.spec.js` (Confirm they FAIL).",
    "4. Create Migration: `backend/src/db/migrations/004_create_patterns.sql`.",
    "   Schema Requirements (Strict):",
    "   - id: SERIAL PRIMARY KEY",
    "   - project_id: INTEGER REFERENCES projects(id) ON DELETE SET NULL",
    "   - type: VARCHAR(50) DEFAULT 'snippet' (Check: snippet, bug_fix, architecture)",
    "   - title: VARCHAR(255) NOT NULL",
    "   - problem: TEXT",
    "   - solution: TEXT NOT NULL",
    "   - description: TEXT",
    "   - tags: TEXT[] (Array of strings) OR JSONB",
    "   - metadata: JSONB DEFAULT '{}'",
    "   - created_at: TIMESTAMP DEFAULT NOW()",
    "   - updated_at: TIMESTAMP DEFAULT NOW()",
    "5. Run migration.",
    "6. Create Model: `backend/src/db/patterns.js` (CRUD methods).",
    "7. Create Route: `backend/src/routes/patterns.js` (Express router).",
    "8. Register Route: Uncomment/Add `/api/patterns` in `backend/index.js`.",
    "9. Run Tests: `npx jest src/__tests__/routes/patterns.spec.js` (Should PASS).",
    "10. Commit: `feat: implement pattern library api`."
  ],
  "relevant_files": [
    "backend/src/__tests__/routes/patterns.spec.js",
    "backend/index.js",
    "backend/src/db/connection.js"
  ]
}
